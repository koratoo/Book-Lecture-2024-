## 목차

### [4장 카프카 상세 개념 설명](#4장-카프카-상세-개념-설명)

- [4.1 토픽과 파티션](#41-토픽과-파티션)

  - [4.1.1 적정 파티션 개수](#411-적정-파티션-개수)
  - [4.1.2 토픽 정리 정책(cleanup.policy)](#412-토픽-정리-정책cleanuppolicy)
    - [토픽 삭제 정책(delete policy)](#토픽-삭제-정책delete-policy)
    - [토픽 압축 정책(compact policy)](#토픽-압축-정책compact-policy)
  - [4.1.3 ISR(In-Sync-Replicas)](#413-isr-in-sync-replicas)
    - [unclean.leader.election.enable](#uncleanleaderelectionenable)

- [4.2 카프카 프로듀서](#42-카프카-프로듀서)

  - [4.2.1 acks 옵션](#421-acks-옵션)
    - [min.insync.replicas](#mininsyncreplicas)
  - [4.2.2 멱등성 프로듀서(idempotence producer)](#422-멱등성-프로듀서idempotence-producer)
  - [4.2.3 트랜잭션 프로듀서(transaction producer)](#423-트랜잭션-프로듀서transaction-producer)

- [4.3 카프카 컨슈머](#43-카프카-컨슈머)

  - [4.3.1 멀티 스레드 컨슈머](#431-멀티-스레드-컨슈머)
    - [카프카 컨슈머 멀티 워커 스레드 전략](#카프카-컨슈머-멀티-워커-스레드-전략)
    - [카프카 컨슈머 멀티 스레드 전략](#카프카-컨슈머-멀티-스레드-전략)
  - [4.3.2 컨슈머 랙](#432-컨슈머-랙)
    - [카프카 명령어를 사용하여 컨슈머 랙 조회](#카프카-명령어를-사용하여-컨슈머-랙-조회)
    - [컨슈머 metrics() 메서드를 사용하여 컨슈머 랙 조회](#컨슈머-metrics-메서드를-사용하여-컨슈머-랙-조회)
    - [외부 모니터링 툴을 사용하여 컨슈머 랙 조회](#외부-모니터링-툴을-사용하여-컨슈머-랙-조회)
  - [4.3.2.1 카프카 버로우](#4321-카프카-버로우)
    - [컨슈머 랙 모니터링 아키텍처](#컨슈머-랙-모니터링-아키텍처)
  - [4.3.3 컨슈머 배포 프로세스](#433-컨슈머-배포-프로세스)
    - [중단 배포](#중단-배포)
    - [무중단 배포](#무중단-배포)

- [4.4 스프링 카프카](#44-스프링-카프카)

  - [4.4.1 스프링 카프카 프로듀서](#441-스프링-카프카-프로듀서)
    - [기본 카프카 템플릿](#기본-카프카-템플릿)
    - [커스텀 카프카 템플릿](#커스텀-카프카-템플릿)
  - [4.4.2 스프링 카프카 컨슈머](#442-스프링-카프카-컨슈머)
    - [기본 리스너 컨테이너](#기본-리스너-컨테이너)
    - [커스텀 리스너 컨테이너](#커스텀-리스너-컨테이너)

- [4.5 정리](#45-정리)

### [5장 카프카 실전 프로젝트](#5장-카프카-실전-프로젝트)

- [5.1 웹 페이지 이벤트 적재 파이프라인 생성](#51-웹-페이지-이벤트-적재-파이프라인-생성)

  - [5.1.1 요구 사항](#511-요구-사항)
  - [5.1.2 정책 및 기능 정의](#512-정책-및-기능-정의)
  - [5.1.3 기능 구현](#513-기능-구현)
  - [5.1.4 기능 테스트](#514-기능-테스트)
  - [5.1.5 상용 인프라 아키텍처](#515-상용-인프라-아키텍처)

- [5.2 서버 지표 수집 파이프라인 생성과 카프카 스트림즈 활용](#52-서버-지표-수집-파이프라인-생성과-카프카-스트림즈-활용)

  - [5.2.1 요구 사항](#521-요구-사항)
  - [5.2.2 정책 및 기능 정의](#522-정책-및-기능-정의)
  - [5.2.3 기능 구현](#523-기능-구현)
  - [5.2.4 기능 테스트](#524-기능-테스트)
  - [5.2.5 상용 인프라 아키텍처](#525-상용-인프라-아키텍처)

- [5.3 미러메이커2를 사용한 토픽 미러링](#53-미러메이커2를-사용한-토픽-미러링)

  - [5.3.1 요구 사항](#531-요구-사항)
  - [5.3.2 기능 정의](#532-기능-정의)
  - [5.3.3 기능 구현](#533-기능-구현)
  - [5.3.4 기능 테스트](#534-기능-테스트)
  - [5.3.5 상용 인프라 아키텍처](#535-상용-인프라-아키텍처)

- [5.4 정리](#54-정리)

### [6장 클라우드 카프카 서비스](#6장-클라우드-카프카-서비스)

- [6.1 컨플루언트 클라우드](#61-컨플루언트-클라우드)

  - [6.1.1 컨플루언트 클라우드 활용](#611-컨플루언트-클라우드-활용)
    - [6.1.1.1 클러스터 생성](#6111-클러스터-생성)
    - [6.1.1.2 토픽 생성](#6112-토픽-생성)
    - [6.1.1.3 API키 발급](#6113-api키-발급)
    - [6.1.1.4 프로듀서 애플리케이션 연동](#6114-프로듀서-애플리케이션-연동)
    - [6.1.1.5 컨슈머 애플리케이션 연동](#6115-컨슈머-애플리케이션-연동)
    - [6.1.1.6 커넥터 S3 적재 파이프라인](#6116-커넥터-s3-적재-파이프라인)
  - [6.1.2 컨플루언트 카프카 정리](#612-컨플루언트-카프카-정리)

- [6.2 AWS MSK](#62-aws-msk)

  - [6.2.1 MSK 활용](#621-msk-활용)
    - [6.2.1.1 클러스터 생성](#6211-클러스터-생성)
    - [6.2.1.2 MSK 클러스터 연동 인스턴스 생성](#6212-msk-클러스터-연동-인스턴스-생성)
    - [6.2.1.3 토픽 생성](#6213-토픽-생성)
    - [6.2.1.4 프로메테우스 설치 및 연동](#6214-프로메테우스-설치-및-연동)
    - [6.2.1.5 그라파나 설치 및 연동](#6215-그라파나-설치-및-연동)
    - [6.2.1.6 콘솔 프로듀서, 컨슈머 연동](#6216-콘솔-프로듀서-컨슈머-연동)
  - [6.2.2 AWS MSK 정리](#622-aws-msk-정리)

- [6.3 정리](#63-정리)

### [7장 부록](#7장-부록)

- [7.1 카프카 소스코드 다운로드 및 분석](#71-카프카-소스코드-다운로드-및-분석)
- [7.2 로컬 테스트용 카프카 도커 이미지 실행](#72-로컬-테스트용-카프카-도커-이미지-실행)

## 4장 카프카 상세 개념 설명

### 4.1 토픽과 파티션

#### 4.1.1 적정 파티션 개수

#### 4.1.2 토픽 정리 정책(cleanup.policy)

##### 토픽 삭제 정책(delete policy)

##### 토픽 압축 정책(compact policy)

#### 4.1.3 ISR(In-Sync-Replicas)

##### unclean.leader.election.enable

### 4.2 카프카 프로듀서

#### 4.2.1 acks 옵션

##### min.insync.replicas

#### 4.2.2 멱등성 프로듀서(idempotence producer)

#### 4.2.3 트랜잭션 프로듀서(transaction producer)

### 4.3 카프카 컨슈머

#### 4.3.1 멀티 스레드 컨슈머

##### 카프카 컨슈머 멀티 워커 스레드 전략

##### 카프카 컨슈머 멀티 스레드 전략

#### 4.3.2 컨슈머 랙

##### 카프카 명령어를 사용하여 컨슈머 랙 조회

##### 컨슈머 metrics() 메서드를 사용하여 컨슈머 랙 조회

##### 외부 모니터링 툴을 사용하여 컨슈머 랙 조회

#### 4.3.2.1 카프카 버로우

##### 컨슈머 랙 모니터링 아키텍처

#### 4.3.3 컨슈머 배포 프로세스

##### 중단 배포

##### 무중단 배포

### 4.4 스프링 카프카

#### 4.4.1 스프링 카프카 프로듀서

##### 기본 카프카 템플릿

##### 커스텀 카프카 템플릿

#### 4.4.2 스프링 카프카 컨슈머

##### 기본 리스너 컨테이너

##### 커스텀 리스너 컨테이너

### 4.5 정리

## 5장 카프카 실전 프로젝트

### 5.1 웹 페이지 이벤트 적재 파이프라인 생성

#### 5.1.1 요구 사항

#### 5.1.2 정책 및 기능 정의

#### 5.1.3 기능 구현

#### 5.1.4 기능 테스트

#### 5.1.5 상용 인프라 아키텍처

### 5.2 서버 지표 수집 파이프라인 생성과 카프카 스트림즈 활용

#### 5.2.1 요구 사항

#### 5.2.2 정책 및 기능 정의

#### 5.2.3 기능 구현

#### 5.2.4 기능 테스트

#### 5.2.5 상용 인프라 아키텍처

### 5.3 미러메이커2를 사용한 토픽 미러링

#### 5.3.1 요구 사항

#### 5.3.2 기능 정의

#### 5.3.3 기능 구현

#### 5.3.4 기능 테스트

#### 5.3.5 상용 인프라 아키텍처

### 5.4 정리

## 6장 클라우드 카프카 서비스

### 6.1 컨플루언트 클라우드

#### 6.1.1 컨플루언트 클라우드 활용

##### 6.1.1.1 클러스터 생성

##### 6.1.1.2 토픽 생성

##### 6.1.1.3 API키 발급

##### 6.1.1.4 프로듀서 애플리케이션 연동

##### 6.1.1.5 컨슈머 애플리케이션 연동

##### 6.1.1.6 커넥터 S3 적재 파이프라인

#### 6.1.2 컨플루언트 카프카 정리

### 6.2 AWS MSK

#### 6.2.1 MSK 활용

##### 6.2.1.1 클러스터 생성

##### 6.2.1.2 MSK 클러스터 연동 인스턴스 생성

##### 6.2.1.3 토픽 생성

##### 6.2.1.4 프로메테우스 설치 및 연동

##### 6.2.1.5 그라파나 설치 및 연동

##### 6.2.1.6 콘솔 프로듀서, 컨슈머 연동

#### 6.2.2 AWS MSK 정리

### 6.3 정리

## 7장 부록

### 7.1 카프카 소스코드 다운로드 및 분석

### 7.2 로컬 테스트용 카프카 도커 이미지 실행

# 목차

## [4. 스프링과 문제 해결 - 트랜잭션](#4-스프링과-문제-해결---트랜잭션)

- [4.1 문제점들](#41-문제점들)
- [4.2 트랜잭션 추상화](#42-트랜잭션-추상화)
- [4.3 트랜잭션 동기화](#43-트랜잭션-동기화)
- [4.4 트랜잭션 문제 해결 - 트랜잭션 매니저1](#44-트랜잭션-문제-해결---트랜잭션-매니저1)
- [4.5 트랜잭션 문제 해결 - 트랜잭션 매니저2](#45-트랜잭션-문제-해결---트랜잭션-매니저2)
- [4.6 트랜잭션 문제 해결 - 트랜잭션 템플릿](#46-트랜잭션-문제-해결---트랜잭션-템플릿)
- [4.7 트랜잭션 문제 해결 - 트랜잭션 AOP 이해](#47-트랜잭션-문제-해결---트랜잭션-aop-이해)
- [4.8 트랜잭션 문제 해결 - 트랜잭션 AOP 적용](#48-트랜잭션-문제-해결---트랜잭션-aop-적용)
- [4.9 트랜잭션 문제 해결 - 트랜잭션 AOP 정리](#49-트랜잭션-문제-해결---트랜잭션-aop-정리)
- [4.10 스프링 부트의 자동 리소스 등록](#410-스프링-부트의-자동-리소스-등록)
- [4.11 정리](#411-정리)

## [5. 자바 예외 이해](#5-자바-예외-이해)

- [5.1 예외 계층](#51-예외-계층)
- [5.2 예외 기본 규칙](#52-예외-기본-규칙)
- [5.3 체크 예외 기본 이해](#53-체크-예외-기본-이해)
- [5.4 언체크 예외 기본 이해](#54-언체크-예외-기본-이해)
- [5.5 체크 예외 활용](#55-체크-예외-활용)
- [5.6 언체크 예외 활용](#56-언체크-예외-활용)
- [5.7 예외 포함과 스택 트레이스](#57-예외-포함과-스택-트레이스)
- [5.8 정리](#58-정리)

## [6. 스프링과 문제 해결 - 예외 처리, 반복](#6-스프링과-문제-해결---예외-처리-반복)

- [6.1 체크 예외와 인터페이스](#61-체크-예외와-인터페이스)
- [6.2 런타임 예외 적용](#62-런타임-예외-적용)
- [6.3 데이터 접근 예외 직접 만들기](#63-데이터-접근-예외-직접-만들기)
- [6.4 스프링 예외 추상화 이해](#64-스프링-예외-추상화-이해)
- [6.5 스프링 예외 추상화 적용](#65-스프링-예외-추상화-적용)
- [6.6 JDBC 반복 문제 해결 - JdbcTemplate](#66-jdbc-반복-문제-해결---jdbctemplate)

# 4. 스프링과 문제 해결 - 트랜잭션

## 4.1 문제점들

- 문제점들

## 4.2 트랜잭션 추상화

- 트랜잭션 추상화

## 4.3 트랜잭션 동기화

- 트랜잭션 동기화

## 4.4 트랜잭션 문제 해결 - 트랜잭션 매니저1

- 트랜잭션 문제 해결 - 트랜잭션 매니저1

## 4.5 트랜잭션 문제 해결 - 트랜잭션 매니저2

- 트랜잭션 문제 해결 - 트랜잭션 매니저2

## 4.6 트랜잭션 문제 해결 - 트랜잭션 템플릿

- 트랜잭션 문제 해결 - 트랜잭션 템플릿

## 4.7 트랜잭션 문제 해결 - 트랜잭션 AOP 이해

- 트랜잭션 문제 해결 - 트랜잭션 AOP 이해

## 4.8 트랜잭션 문제 해결 - 트랜잭션 AOP 적용

- 트랜잭션 문제 해결 - 트랜잭션 AOP 적용

## 4.9 트랜잭션 문제 해결 - 트랜잭션 AOP 정리

- 실무에선 선언적 트랜잭션 관리를 사용한다.
- 스프링이 제공하는 선언적 트랜잭션 관리 덕분에 트랜잭션 관련 코드를 제거할 수 있게 되었다.

## 4.10 스프링 부트의 자동 리소스 등록

- 스프링 부트는 데이터 소스를 스프링 빈에 자동으로 등록한다.
- 직접 등록하면 스프링 부트는 자동등록을 하지 않는다.
- application.properties에 있는 속성을 사용해서 DataSource를 생성한다.
- 스프링 부트의 데이터 커넥션은 HikariDataSource이다.
- 자동으로 등록되는 트랜잭션 매니저 `PlatformTransactionManager`

## 4.11 정리

- 트랜잭션을 스프링이 어떻게 해결해 나가는지
- 서비스 계층 : 비즈니스 로직, 순수 자바코드가 좋다.
- 트랜잭션을 적용하다보니 JDBC를 의존하게 되었음
  - 트랜잭션 추상화를 하게 됨
  - 스프링이 이미 다 만들어 놓음
- 트랜잭션 동기화 , 스레드 로컬을 사용해서 해결 -> 고급편에서 자세히
- 트랜잭션 템플릿 기능을 제공한다. 성공시 커밋 실패시 롤백.
- 트랜잭션 AOP와 프록시를 사용하여 순수한 비즈니스 로직만 남게 됨

# 5. 자바 예외 이해

## 5.1 예외 계층

- 예외 계층

## 5.2 예외 기본 규칙

- 예외 기본 규칙

## 5.3 체크 예외 기본 이해

- 체크 예외 기본 이해

## 5.4 언체크 예외 기본 이해

- 언체크 예외 기본 이해

## 5.5 체크 예외 활용

- 언체크 예외 : 런타임 예외
- 기본적으로 언체크(런타임) 예외를 사용하자.
- 체크 예외는 비즈니스 로직상 의도적으로 던지는 예외일 경우에만 사용한다.
  - 체크 예외 케이스 : 계좌 이체 실패, 결제시 포인트 부족, 로그인 ID,PW 불일치 예외
- 체크 예외의 문제점 : 사용자가 이해할 수 없는 오류, 보안에 문제가 생길 수 있음
  - 어쩔 수 없이 throw를 던져야 함.
  - throw를 던지게 되면 해당 Exception을 의존하게 된다. (ex) SQLException -> JPAExeption으로 변경된다면??

## 5.6 언체크 예외 활용

```java
/* SQLException -> Runtime예외로 */
public void runSQL() throws SQLException {
    throw new SQLException("ex");
}
/* 2단계 */
static class Repository {
    public void call() {
        try {
            runSQL();
        } catch (SQLException e) { //SQLException은 그대로 둠
            throw new RuntimeSQLException(e); //이전 예외를 포함해서 출력됨
        }
    }
}
/* RuntimeSQLException은 RuntimeException을 상속받음*/
static class RuntimeSQLException extends RuntimeException {
    public RuntimeSQLException(Throwable cause) {
        super(cause);
    }
}

```

- 런타임 에러 - 대부분 복구 불가능함, 의존하지 않아도 된다.
- 런타임 예외는 놓칠 수 있기 때문에 문서화가 중요하다.

## 5.7 예외 포함과 스택 트레이스

- 예외를 전환할때는 꼭! 기존 예외를 포함해야 한다. 그렇지 않으면 스택 트레이스를 확인할 때 심각한 문제가 발생한다.
- 실무에선 항상 로그를 사용해야 한다.
- e.printStackTrace() 는 System.out과 연관됨

```java
/* 기존 예외를 포함하지 않은 잘못된 케이스 */
static class Repository {
    public void call() {
        try {
            runSQL();
        } catch (SQLException e) {
            throw new RuntimeSQLException(); //기존 예외 e를 제외한 경우
        }
    }
}
```

`SQLException에서 던져주는 정보를 알 수가 없다.`

## 5.8 정리

- 가급적 런타임 예외를 쓰자.

# 6. 스프링과 문제 해결 - 예외 처리, 반복

## 6.1 체크 예외와 인터페이스

- 체크 예외와 인터페이스

## 6.2 런타임 예외 적용

- 런타임 예외 적용

## 6.3 데이터 접근 예외 직접 만들기

- 데이터 접근 예외 직접 만들기

## 6.4 스프링 예외 추상화 이해

- 스프링 예외 추상화 이해

## 6.5 스프링 예외 추상화 적용

- 스프링 예외 추상화 적용

## 6.6 JDBC 반복 문제 해결 - JdbcTemplate

- JDBC 반복 문제 해결 - JdbcTemplate

## 6.7 정리

- 스프링은 데이터 접근 계층에 대한 수십 가지 예외를 정리해서 일관된 예외 계층을 제공한다.
- 최상단 RuntimeException

### 6.8 다음으로

- 충분히 잔다. 7시간 반정도
- 일 끝나고 운동하고 3시간 정도 공부한다. -> 시스템화
- 이렇게 6개월, 8개월 하게 되면 내공이 엄청나게 쌓인다.
- 네카라쿠배가 아니라도 좋은 기업에 갈 수 있음
- 시스템을 만들고 꾸준히 하는 사람이 잘 된다.
